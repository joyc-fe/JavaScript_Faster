### 字符串和正则表达式

#### 1. 字符串连接

字符串合并连接方法有以下几种：

- + 操作, str = "a"+"b"
- += 操作, str+="a"
- array.join(), str=["a","b","c"].join("")
- string.concat(), str="a",str.concat("b","c")

##### +与+=

这两个操作符是连接字符串最简单的方法。

```
str+= "one"+"two"
```

上述示例执行过程：a.创建一个临时字符串，b.连接后的字符串"onetwo"赋值给这个临时字符串，c.临时字符串与原str当前值连接，d.结果赋值给str，临时变量回收

##### 数组项合并

Array.prototype.join()方法将数组所有的元素合并成一个字符串，它接受一个字符串参数作为分割符，大多数浏览器中这种方法比其他连接字符串操作更慢。

##### String.prototype.concat

字符串原生方法concat接受任意数量的参数，并将每一个参数追加到所调用的字符串上。使用concat比+和+=稍慢。

#### 2. 正则表达式优化

正则表达式的工作原理：

- 编译，浏览器每次遇到一个正则表达式都会验证表达式，并将其转化为一个原生代码程序，用于匹配操作，如果将正则对象赋给一个变量，则可以避免重复执行这一步骤
- 设置起始位置，在匹配前首先要确定目标字符串的起始位置，它是字符串的起始位置或者是lastIndex属性
- 匹配每个正则表达式单元，从开始位置检查文本和正则表达式模式
- 匹配成功或失败，如果发现了一个完全匹配，则宣布匹配成功，如果所有的可能都没有匹配成功，则回退到第二步，然后从下一个字符重新尝试，如果每个字符都作为起始字符且没有匹配，则宣布匹配失败。


#### 小结

- IE7及更早版本下，大量字符串连接时，数组项合并比较快
- IE7以以上，+和+=操作简单且高效
- 回溯是正则表达式重要组成部分，也是低效的根本
- 避免回溯失控
- 适当使用正则，正则并不是对所有的匹配都高效
